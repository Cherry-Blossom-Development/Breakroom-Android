# Breakroom Android Development Notes - January 2026

## Session Summary

### Bugs Fixed
1. **Invalid Token Error** - App now automatically logs out when receiving 401/403 or token-related errors instead of showing confusing "Invalid Token" snackbar
2. **Profile Page Crash** - Fixed `is_current` field in `UserJob` model (API returns Int 0/1, not Boolean)
3. **Company Portal Empty List** - Fixed `is_owner` and `is_admin` fields in `Company` model (same Int vs Boolean issue)

### Features Added
1. **Company Detail Page** - New screen accessible by tapping a company in "My Companies"
   - Four tabs: Company Info, Employees, Open Positions, Projects
   - Navigation from CompanyPortalScreen implemented

2. **Company Info Tab** (COMPLETED)
   - About section with company description
   - Contact Information section (phone, email, website) - all tappable to open respective apps
   - Location section with full address display

## Next Steps (To Continue)

### Company Page - Remaining Tabs
1. **Employees Tab** - Need to:
   - Add API endpoint for fetching company employees
   - Create employee list UI
   - Consider employee roles display (owner, admin, etc.)

2. **Open Positions Tab** - Need to:
   - Add API endpoint for company positions
   - Create positions list UI
   - May be able to reuse some Employment page components

3. **Projects Tab** - Need to:
   - Add API endpoint for company projects
   - Create projects list UI
   - Define what project data looks like

### Key Files for Company Page
- `CompanyScreen.kt` - Main UI with tabs
- `CompanyViewModel.kt` - State management
- `CompanyRepository.kt` - API calls
- `BreakroomApiService.kt` - API endpoints
- `BreakroomModels.kt` - Data models (may need new models for employees, projects)

### API Endpoints Needed
- `GET api/company/{companyId}/employees` - For Employees tab
- `GET api/company/{companyId}/positions` - For Open Positions tab
- `GET api/company/{companyId}/projects` - For Projects tab

## Technical Notes

### Boolean Fields from API
The backend returns boolean fields as integers (0 or 1). Pattern to handle:
```kotlin
data class SomeModel(
    val is_something: Int = 0  // Raw field from API
) {
    val isSomething: Boolean   // Computed property
        get() = is_something == 1
}
```

### Current Architecture
- MVVM pattern with ViewModels
- Retrofit for API calls
- Jetpack Compose for UI
- StateFlow for reactive state
- BreakroomResult sealed class for API results (Success, Error, AuthenticationError)
